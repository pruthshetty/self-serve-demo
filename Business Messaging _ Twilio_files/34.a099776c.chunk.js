(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"1ScA":function(e,t,a){"use strict";a.d(t,"a",function(){return useReflowFrameClassName});var n=a("s8DI"),c=a("QtlZ"),r=a("ILQF"),i=a("g6eD"),s=a("JBtm"),o=a.n(s),u=a("ERkP"),l=a("EQxi"),f=!1;function useReflowFrameClassName(){var e="";if(!f){var t=Object(l.f)(o.a.parse(document.location.search));e=(null===t||void 0===t?void 0:t.isXSScreenSize)?"widget--xs":"",f=!0}var a=Object(u.useState)(e),s=Object(n.a)(a,2),b=s[0],d=s[1],O=Object(u.useState)(void 0),j=Object(n.a)(O,2),h=j[0],v=j[1];return Object(u.useEffect)(function(){Object(r.c)({topic:"CONDUCTOR:reflowFrame",handler:function handler(e){var t=e.data;d(function(){return t.isXSScreenSize?"widget--xs":""}),c.a.dispatch(Object(i.d)(t.isXSScreenSize)),t.clientInnerHeight&&v(function(){return t.clientInnerHeight})}})},[]),{reflowFrameCX:b,clientInnerHeight:h}}},"2uLe":function(e,t,a){"use strict";var n=a("mj2O"),c=a.n(n),r=a("7SM1"),i=a("s8DI"),s=a("VkHq"),o=a("ILQF"),u=a("Hvhg"),l=a("2XY6"),f=a("ERkP"),b=a("uDfI"),d=a("vTYT"),O=a("hEj5");t.a=function useSetPreviewHeight(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=Object(O.a)(),t=Object(i.a)(e,2),a=t[0],n=t[1],j=Object(b.c)(function(e){return!!e.conversations.activeConversation}),h=Object(b.c)(u.c).showBranding,v=void 0!==h&&h,m=Object(s.a)().noPolicy,p=Object(b.c)(function(e){return e.session.gdpr}),g=p.hasConsent,w=p.declinedConsent,E=p.needsConsent,_=Object(b.c)(l.e),C=Object(f.useCallback)(function(){var e=0,t=!v&&m;return w&&(e+=40),t&&!E&&(e+=18),g||(e+=40+(t?14:7)),e},[w,g,m,v,E]),S=Object(f.useCallback)(function(){return a?a.height:200},[a]),k=Object(f.useCallback)(function(e){var t=S();return e&&!w&&E&&!g&&t<413?411:e&&E&&w?150:t},[w,E,g,S]);return{setChatHeight:Object(f.useCallback)(function(){var e=Object(r.a)(c.a.mark(function _callee(e){var t,a,n,r,i,s,u=arguments;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if(t=u.length>1&&void 0!==u[1]&&u[1],!j||!g){c.next=3;break}return c.abrupt("return");case 3:if(a=k(e),n=C(),r=_&&!g?130:155,205!==(i=e?a+r-n:0)){c.next=9;break}return c.abrupt("return");case 9:s=g,Object(o.a)({topic:"set-frame-height",message:{height:"".concat(i,"px"),name:d.d.CHAT,transition:s,transitionHeight:t}});case 11:case"end":return c.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),[j,g,k,C,_]),setPreviewRef:n,setSliderHeight:Object(f.useCallback)(Object(r.a)(c.a.mark(function _callee2(){var e;return c.a.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:e=S(),_&&(e="calc(100% - 20px)"),Object(o.a)({topic:"set-frame-height",message:{height:"".concat(e+80,"px"),name:d.d.SLIDER,transition:!0,transitionHeight:!1}});case 3:case"end":return t.stop()}},_callee2)})),[S,_]),setEmailCaptureHeight:Object(f.useCallback)(Object(r.a)(c.a.mark(function _callee3(){var e;return c.a.wrap(function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:e=S(),Object(o.a)({topic:"set-frame-height",message:{height:"".concat(e+35,"px"),name:d.d.EMAIL_CAPTURE,transition:!0,transitionHeight:!1}});case 2:case"end":return t.stop()}},_callee3)})),[S])}}},G5CQ:function(e,t,a){},Gxm1:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return o});var n=a("QtlZ"),c=a("LVcX"),r=a("0lfv"),i=a("CYoe"),s=function markTime(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n.a.dispatch(Object(i.c)(e,t))},o=function measureTime(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),a=Object(c.a)(null,["metrics","timeByName",e],Object(n.b)());return a?(n.a.dispatch(Object(i.a)(e)),t-a):(Object(r.n)({type:"warn",data:['Tried to measure "'.concat(e,'" without mark')]}),null)}},SrLZ:function(e,t,a){"use strict";a.r(t);var n=a("jm9a"),c=a("mj2O"),r=a.n(c),i=a("7SM1"),s=a("s8DI"),o=a("OE2q"),u=a("O94r"),l=a.n(u),f=a("Rqwx"),b=a("fTFZ"),d=a("vkRn"),O=a("CwrG"),j=a("HXmn"),h=a("8eKL"),v=a("slYP"),m=a("BY8A"),p=a("+/Je"),g=a("Y0wo"),w=a("fw6E"),E=a("1b8i"),_=a("gRD2"),C=a("+qGC"),S=a("fpJs"),k=a("Sn8X"),A=a("fJrp"),y=a("1ScA"),T=a("VkHq"),L=a("GM2V"),H=a("lE29"),I=a("swFs"),R=a("+Kbs"),x=a("nQD+"),N=a("sxX9"),F=a("pwwT"),B=a("2uLe"),D=a("2XY6"),P=a("ERkP"),V=a.n(P),X=a("uDfI"),G=(a("SwvN"),function HeaderLayout(e){var t=e.chatHidden,a=Object(H.a)(),n=a.backgroundStyles,c=a.conversationHeaderTextStyles,r=Object(X.c)(function(e){return e.session.gdpr}).hasConsent,i=Object(B.a)(),o=i.setChatHeight,u=i.setPreviewRef,f=Object(X.c)(function(e){return e.view}).chatOpen,b=Object(F.a)(),d=Object(P.useState)(Object(X.c)(D.a)),O=Object(s.a)(d,2),j=O[0],h=O[1],v=Object(A.a)(j),m=j!==v;Object(P.useLayoutEffect)(function(){f&&!t&&o(f,m)},[f,t,o,m]);var p=Object(X.c)(D.a);Object(P.useEffect)(function(){p!==j&&h(p)},[p,j]);var g=N.a[j],w=j!==N.b.CONVERSATION;return V.a.createElement("header",{className:l()("drift-widget-header",{"drift-widget-header--collapsed":w,"drift-widget-header--gdpr-consent":!r})},V.a.createElement(I.a,{style:n}),V.a.createElement("div",{className:"drift-widget-header--content content--".concat(j)},V.a.createElement(g,{previewRef:u,resetChatHeight:function resetChatHeight(){o(f,!0)}})),V.a.createElement(x.a,{onClick:b,className:"drift-widget-close","aria-label":"Close Drift Widget messenger",style:c},V.a.createElement(R.j,{width:16,height:16})))}),M=a("ILQF"),Q=a("K7i0"),Y=a("bYXQ"),J=a("Hvhg"),U=a("SFoa"),$=a("pu/X"),q=a("da4L"),z=a("Gxm1"),Z=a("LVcX"),K=a("TbSn"),W=a("kNJ0"),ee=a("oPI6"),te=a("ADGC"),ae=a("0lfv"),ne=a("VpmR"),ce=a("4c+F"),re=a("HSQL"),ie=(a("sXTY"),Object(P.lazy)(function(){return a.e(47).then(a.bind(null,"f2yG"))})),se=null,oe=function ChatLayout(){var e=Object(X.b)(),t=Object(te.c)(),a=Object(y.a)(),c=Object(P.useState)(!0),u=Object(s.a)(c,2),f=u[0],I=u[1];Object(k.a)();var R=Object(X.c)(function(e){return e.view}),x=R.chatOpen,N=R.isChatTakeover,F=Object(X.c)(J.c).showBranding,B=void 0!==F&&F,U=Object(T.a)().noPolicy,ee=!B&&U;Object(P.useLayoutEffect)(function(){N&&x&&Object(M.a)({topic:"set-frame-width-and-height",message:{className:g.a,height:"100%",max:!0,name:"chat",width:"100%"}})},[N,x]);var ne=Object(X.c)(function(e){return e.conversations.activeConversation}),oe=Object(_.a)().fetchMessages,ue=Object(A.a)(ne),le=Object(X.c)(function(e){return e.conversations.conversations}),fe=Object(X.c)(function(e){return e.conversations.messages}),be=Object(X.c)(function(e){return Object(Z.a)({},["conversations","messages",e.conversations.activeConversation],e)}),de=Object(X.c)(function(e){return Object(Z.a)(!1,["conversations","conversationStatus",e.conversations.activeConversation,"permaclosed"],e)}),Oe=Object(P.useMemo)(function(){return Object(q.s)(be)},[be]),je=Object(X.c)(function(e){return e.campaigns.activeCampaign}),he=Object(X.c)(function(e){return e.session.gdpr}).hasConsent,ve=Object(w.a)(),me=ve.conversationHistoryOpen,pe=ve.conversationHistoryEnabled,ge=Object(L.a)(),we=ge.sendTranscriptOpen,Ee=ge.sendTranscriptEnabled,_e=Object(H.a)().widgetBackgroundStyles;Object(P.useEffect)(function(){(function(){var t=Object(i.a)(r.a.mark(function _callee(){var t,a,n,c,i;return r.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(t=!ne||ne===p.a,a=ue===ne,n=!!le[ne]&&!!fe[ne],!(t||a||n||Object(Y.e)(ne))){r.next=5;break}return r.abrupt("return");case 5:return r.prev=5,r.next=8,Object(o.h)(ne);case 8:c=r.sent,i=c.data,e(Object(Q.i)({conversation:i})),oe({}),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(5),Object(ae.f)($.a.MESSAGE.FETCH_MESSAGE_OR_ACTIVE_CONVO,r.t0,!0);case 17:case"end":return r.stop()}},_callee,null,[[5,14]])}));return function fetchInfoForActiveConversation(){return t.apply(this,arguments)}})()()},[ne,e,oe,ue,le,fe]),Object(P.useEffect)(function(){x?(function(){var e=Object(i.a)(r.a.mark(function _callee2(){return r.a.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.a)({topic:"focus-frame",message:{name:"chat"}});case 2:case"end":return e.stop()}},_callee2)}));return function focus(){return e.apply(this,arguments)}}()(),se&&clearTimeout(se),I(!1)):se=setTimeout(function delaySetReflowHidden(){I(!0)},350)},[x]);var Ce=Object(P.useMemo)(function(){if(!he||!x)return!1;if(je&&je.id&&!ne){var e=!!Object(Z.a)(null,["attributes","cta"],je),t="CHAT_RESPONSE"!==Object(Z.a)(null,["attributes","cta","CtaType"],je);if(e&&t)return!1}var a=Oe.length>0&&Oe.length<=2&&!Object(q.e)(Oe[0]);return!N||a||Oe.length>2},[je,ne,he,N,Oe,x]);Object(P.useEffect)(function(){Object(re.b)("WIDGET_CHAT_FRAME.start")},[]);var Se=Object(P.useRef)(!1);Object(P.useEffect)(function(){if(!Se.current&&N&&Oe.length>0){var e=Object(z.b)("post_form_takeover_tti"),t=Object(z.b)("post_form_takeover_show");e&&Object(ce.d)("Post Form Takeover TTI",e),t&&Object(ce.d)("Post Form Takeover Show",t),Se.current=!0}},[N,Oe]);var ke=Object(P.useMemo)(function(){if(de)return b.a.UNAVAILABLE;var e=Object(K.a)(Oe);if(!e)return b.a.AVAILABLE;var t=Object(W.a)(-2,Oe),a=Object(q.e)(t)&&Object(q.i)(e);return Object(q.e)(e)||a||Object(q.j)(e)?b.a.UNAVAILABLE_BUTTONS:Object(q.o)(e)||Object(q.o)(t)&&Object(q.i)(e)?b.a.AVAILABLE_BUTTONS:b.a.AVAILABLE},[Oe,de]),Ae=ke===b.a.AVAILABLE||ke===b.a.AVAILABLE_BUTTONS,ye=Object(E.a)(Oe,ne),Te=Object(P.useMemo)(function(){return Object(q.c)(ye)},[ye]),Le=Object(C.b)(ye),He=Object(C.a)(ye),Ie=!Object(ae.m)(Le)&&Object(ae.m)(He),Re=Object(P.useMemo)(function(){return V.a.createElement(h.a,{messageGroups:Te,messages:ye,reflowHidden:f,disabled:me})},[Te,ye,f,me]),xe=Object(S.a)(),Ne=he&&(!!ne||N),Fe=!Ce||!Ae,Be=Object(X.c)(D.a);return V.a.createElement("main",{className:l()("drift-widget-chat-layout",Object(n.a)({"drift-widget-chat-layout__takeover":N&&!t},a.reflowFrameCX,!!a)),"aria-live":"polite"},V.a.createElement(m.a,null),V.a.createElement("div",{className:l()("drift-widget-chat-wrapper","drift-widget-chat-wrapper__".concat(Be),{"drift-widget-chat-wrapper__open":x,"drift-widget-chat-wrapper__closed":!x,"drift-widget-chat-wrapper__reflow-hidden":f,"drift-widget-chat-wrapper__active-conversation":Ne,"drift-widget-chat-wrapper__no-footer-content":ee&&Fe,"drift-widget-chat-wrapper__mobile":t,"drift-widget-chat-wrapper__conversation-history":me})},V.a.createElement(G,{chatHidden:f}),!N&&pe&&V.a.createElement(d.a,null),!N&&Ee&&V.a.createElement("div",{className:l()("drift-widget-send-transcript-container",{"drift-widget-send-transcript-container--open":we}),"aria-hidden":!we},we&&V.a.createElement(ie,{key:we.toString()})),Ne&&V.a.createElement("div",{className:l()("drift-widget-message-history",{"drift-widget-message-history--with-footer":xe,"drift-widget-message-history--no-composer":Fe}),style:_e},Re,0===Oe.length&&V.a.createElement(j.a,{titleId:"ChatLayoutLoading"})),V.a.createElement("div",{className:"drift-widget-chat-bottom"},Ce&&V.a.createElement(b.b,{chatHidden:f,disabled:me||we}),!(me||we)&&V.a.createElement(O.a,null)),ne&&Ie&&V.a.createElement(v.a,{message:Le})))};t.default=function(e){var t=Object(P.useState)(!1),a=Object(s.a)(t,2),n=a[0],c=a[1],o=Object(X.c)(function(e){return e.view.initComplete}),u=Object(U.f)();return Object(P.useEffect)(function(){o&&!n&&function(){var e=Object(i.a)(r.a.mark(function _callee3(){return r.a.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ne.b)(u);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(ae.n)({data:["i18n failed to load - ".concat(e.t0.message),e.t0],type:"warn",internal:!0});case 8:c(!0);case 9:case"end":return e.stop()}},_callee3,null,[[0,5]])}));return function runAsync(){return e.apply(this,arguments)}}()()},[o,n,u]),V.a.createElement(ee.a,{"aria-live":"polite"},o&&n?V.a.createElement(oe,e):V.a.createElement(f.a,null))}},SwvN:function(e,t,a){},hEj5:function(e,t,a){"use strict";var n=a("s8DI"),c=a("ERkP"),r=a("LaGA");t.a=function useResizeObserver(){var e=Object(c.useState)(),t=Object(n.a)(e,2),a=t[0],i=t[1],s=Object(c.useState)(null),o=Object(n.a)(s,2),u=o[0],l=o[1],f=Object(c.useRef)(null),b=Object(c.useCallback)(function(){return f.current&&f.current.disconnect()},[]),d=Object(c.useCallback)(function(){u&&(f.current=new r.a(function(){return i(function getRectForRef(e){return e&&e.getBoundingClientRect()}(u))}),f.current.observe(u))},[u]);return Object(c.useLayoutEffect)(function(){return d(),function(){return b()}},[b,d]),[a,l]}},sXTY:function(e,t,a){},swFs:function(e,t,a){"use strict";var n=a("ERkP"),c=a.n(n);a("G5CQ");t.a=function TopLine(e){var t=e.style;return c.a.createElement("div",{className:"drift-widget-header-top-line",style:t})}}}]);